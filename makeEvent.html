<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event info</title>
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/util/jquery-ui/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="js/util/jquery-ui/jquery-ui.css">
    <link rel="stylesheet" href="css/chrEventInfo.css">
    <link rel="stylesheet" href="css/ModalComponent.css">
    <link rel="stylesheet" href="css/ShipEquipSelectorComponent.css">
    <link rel="stylesheet" href="css/ShipEditorComponent.css">
    <link rel="stylesheet" href="css/EquipEditorComponent.css">
    <script src="js/pixi.min.js"></script>
    <script src="js/bonuses.js"></script>
    <script src="js/routing.js"></script>
    <script src="js/routingSpecial.js"></script>
    <script src="js/gimmick.js"></script>
    <script src="js/kcSHIPDATA.js"></script>
    <script src="js/kcEQDATA.js"></script>
    <script src="js/chkcMAPDATA2.js"></script>
    <script src="js/data/event/mapdata45.js"></script>
    <script src="js/data/event/mapdata46.js"></script>
    <script src="js/data/event/mapdata47.js"></script>
    <script src="js/data/event/mapdata48.js"></script>
    <script src="js/data/event/mapdata49.js"></script>
    <script src="js/data/event/mapdata50.js"></script>
    <script src="js/data/event/mapdata51.js"></script>
    <script src="js/data/event/mapdata97.js"></script>
    <script src="js/data/event/mapdata99.js"></script>
    <script src="js/kcENEMYCOMP.js"></script>
    <script src="js/data/event/enemycomp46.js"></script>
    <script src="js/data/event/enemycomp47.js"></script>
    <script src="js/data/event/enemycomp48.js"></script>
    <script src="js/data/event/enemycomp49.js"></script>
    <script src="js/data/event/enemycomp50.js"></script>
    <script src="js/data/event/enemycomp51.js"></script>
    <script src="js/data/event/enemycomp10.js"></script>
    <script src="js/howler.min.js"></script>
    <script src="js/playersound.js"></script>
    <script src="js/playersound2.js"></script>
    <script src="js/shared.js"></script>
    <script src="js/kcships.js"></script>
    <script src="js/kcsim.js"></script>
    <script src="js/data/event/chrRandomEvent/chrRandomizeEvent.js"></script>
    <script src="js/data/event/chrRandomEvent/chrRandomizeGimmicks.js"></script>
    <script src="js/data/event/chrRandomEvent/chrRandomizeBonuses.js"></script>

    
    <script src="js/data/objects/chMapData.js"></script>
    <script src="js/data/objects/chEventData.js"></script>

    <script src="js/data/eventEditor/common.js"></script>
	<script src="js/vue.global.dev.js"></script>
	<script src="js/vue-i18n.global.js"></script>
</head>

<body>
    <div id="eventEditor">

        <map-selection :event-data="eventData" @add-map="addMap" @element-changed="elementChanged"></map-selection>

        <div v-if="isMapSelected"><map-editor :map-data="selectedMap"></map-editor></div>
        <div v-else><event-editor :event-data="eventData"></event-settings></div>

        <vshipselector></vshipselector>
        <vequipselector></vequipselector>
    </div>

    <template id="map-editor">
		<div class="group-title">{{mapData.name}}</div>
        <div class="editor-group">    
            <table>
                <tr>
                    <td>Map name</td>
                    <td><input v-model="mapData.nameT" name="nameT"/></td>
                </tr>
            </table>
        </div>
	</template>

    <template id="event-editor">
		<div class="group-title">Event infos</div>
        <div class="editor-group">
            <table>
                <tr>
                    <td>Event name</td>
                    <td><input v-model="eventData.name" name="name"/></td>
                </tr>

                <tr>
                    <td>Event date (used for mechanics, ships/equipments availability, ...)</td>
                    <td><input v-model="eventData.date" type="date" name="date"/></td>
                </tr>
                
                <tr>
                    <td>Event banner</td>
                    <td><input v-model="eventData.bannerImg" style="width: 300px;"/></td>
                </tr>
                <tr>
                    <td colspan="2"><img :src="eventData.bannerImg"/></td>
                </tr>

                <tr>
                    <td>Available difficulties</td>
                    <td><multi-checkboxes-editor :data-source="eventData.allowDiffs" :item-list="difficultiesItemSource"></multi-checkboxes-editor></td>
                </tr>

                <tr>
                    <td>Allowed fleets</td>
                    <td><multi-checkboxes-editor :data-source="eventData.allowFleets" :item-list="fleetsItemSource"></multi-checkboxes-editor></td>
                </tr>
                
                <tr>
                    <td>Allow LBAS</td>
                    <td><input type="checkbox" v-model="eventData.allowLBAS" /></td>
                </tr>

                <tr>
                    <td>Allow vanguard formation</td>
                    <td><input type="checkbox" v-model="eventData.allowVanguard" /></td>
                </tr>

                <tr>
                    <td>Allow strong friend fleets</td>
                    <td><input type="checkbox" v-model="eventData.allowStrongFF" /></td>
                </tr>

                <tr>
                    <td>Friend fleets waves</td>
                    <td colspan="2">
                        <div>
                            <button @click="addWave">Add wave</button>
                        </div>
                        <div v-for="(element, index) in eventData.friendFleetWaves" :key="index" style="display: flex;">
                            <div style="margin-right:10px;">Wave {{index}}</div>
                            <input type="date" v-model="element.date" style="margin-right:10px;" @change="recomputeWavesNumbers"></input>
                            <button @click="deleteWave(element)">Delete</button>
                        </div>
                    </td>
                </tr>
            </table>
        </div>        

        <div class="group-title">Shiplocks</div>
        <div class="editor-group">
            <div>
                <button @click="addLock">Add lock</button>
            </div>
            <div v-for="(element, index) in eventData.locksData" :key="index" style="display: flex; align-items: center;">
                
                <div style="margin-right:10px;">Name</div>
                <input v-model="element.name" style="width: 300px;margin-right:10px;"/>

                <div style="margin-right:10px;">Lock image</div>
                <input v-model="element.image" style="width: 300px;margin-right:10px;"/>
                <button @click="deleteLock(element)" style="margin-right:10px;">Delete</button>
                <img :src="element.image"/>

            </div>
        </div>        
        
        <div class="group-title">Friend Fleets</div>
        <div id="divFriendFleets" class="editor-group">
            <div><input type="button" value="Add Friend Fleet" @click="addFriendFleet"/><input placeholder="Name" maxlength="50" ref="friendFleetName" v-model="friendFleetNewName" @keydown.enter="addFriendFleet"/></div>
            <div class="tabber">
                <div v-for="(fleet,key) in eventData.friendFleet" :key="key" class="tabberButton" :class="{selected:key==friendFleetCurrent}" @click="friendFleetCurrent=key">{{key}}</div>
            </div>
            <div v-if="friendFleetCurrent" class="fleetDisplay">
                <div>
                    <div>{{friendFleetCurrent}}</div>
                    <div><vfleeteditor :fleet="eventData.friendFleet[friendFleetCurrent]" is-friend-fleet="1"></vfleeteditor></div>
                </div>
                <div><input type="button" value="Delete Fleet" @click="deleteFriendFleet(friendFleetCurrent)"/></div>
            </div>
        </div>
	</template>
</body>

<script src="js/data/eventEditor/i18n.js"></script>
<script src="js/data/eventEditor/components/ModalComponent.js"></script>
<script src="js/data/eventEditor/components/ShipEquipSelectorComponent.js"></script>
<script src="js/data/eventEditor/components/EquipEditorComponent.js"></script>
<script src="js/data/eventEditor/components/ShipEditorComponent.js"></script>
<script src="js/data/eventEditor/components/FleetEditorComponent.js"></script>
<script src="js/data/eventEditor/components/MapSelectionComponent.js"></script>
<script src="js/data/eventEditor/components/MultiCheckboxesEditorComponent.js"></script>
<script src="js/data/eventEditor/components/MapEditorComponent.js"></script>
<script src="js/data/eventEditor/components/EventEditorComponent.js"></script>
<script src="js/data/eventEditor/chrEventEditor.js"></script>
<!--script src="js/data/event/chrRandomEvent/chrMap.js"></script>
<script src="js/data/event/chrRandomEvent/chrDisplayEventInfo.js"></script>
<script src="js/data/event/chrRandomEvent/chrMakeEvent.js"></script>
<script src="js/data/event/chrRandomEvent/chrMakeEventPage.js"></script-->
</html>